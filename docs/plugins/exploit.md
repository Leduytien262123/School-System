# Phát triển Plugin

::: tip Plugin là gì?
Phát triển theo kiểu plugin trong framework mang lại một hệ thống mở, khả năng mở rộng cao và cấu hình linh hoạt. Nó cho phép lập trình viên tự do lựa chọn các module chức năng khác nhau để kết hợp thành một hệ thống ứng dụng hoàn chỉnh, từ đó nâng cao hiệu suất phát triển, giảm độ phức tạp, tiết kiệm tài nguyên. Kiểu framework này có lợi cho cả nhà phát triển hệ thống và người dùng, giúp giải quyết hiệu quả các vấn đề phát triển hệ thống phức tạp, nâng cao chất lượng phần mềm và độ ổn định của hệ thống. Ngoài ra, framework dạng plugin còn cho phép phát triển tách biệt từng module, tăng khả năng bảo trì phần mềm và giảm chi phí phát triển.
:::

## Làm thế nào để viết một plugin

```javascript
export default class ExamplePlugin {
  constructor() {
    this.name = "ExamplePlugin";
    this._enable = false;
  }

  // Cài đặt plugin
  install({ ctx }, options) {
    this._enable = true;
    // ctx là ngữ cảnh của plugin hiện tại, bao gồm đối tượng toàn cục vue app, đối tượng toàn cục pinia, và ngữ cảnh của các plugin khác
  }

  // Vô hiệu hóa plugin
  disable() {
    this._enable = false;
  }

  // Kích hoạt plugin
  enable() {
    this._enable = true;
  }

  // Hủy plugin
  destroy() {}

  // Kiểm tra plugin có được kích hoạt hay không
  inEnabled() {
    return this._enable;
  }
}
// Xuất plugin
export const useExamplePlugin = new ExamplePlugin();
```

## Ví dụ phát triển

Ở đây tôi sẽ phát triển một plugin thường dùng là `chặn request`.

```javascript
export class AlovaPlugin {
  constructor() {
    this.name = "AlovaPlugin";
    this.Authorization = null;
  }

  install({ ctx }, options) {
    // Ở đây chặn tất cả các request, mỗi request đều kèm theo token này
    ctx.http.alovaInstance.options.beforeRequest = (method) => {
      if (!this.Authorization) {
        this.Authorization = localStorage.getItem("token");
      }
      method.config.headers["Authorization"] = `Bearer ${this.Authorization}`;
    };
  }
}

export const useAlovaPlugin = new AlovaPlugin();
```

```javascript
import install from "vue-bag-admin";
const { app, framework, plugins } = install();

framework.use(useAlovaPlugin); // Sau khi viết xong plugin, đăng ký nó
app.mount("#app");
```
